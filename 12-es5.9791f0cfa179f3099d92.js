!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"luD+":function(t,s,i){"use strict";i.r(s),i.d(s,"MessagesModule",function(){return Qe});var o,n=i("ofXK"),c=i("tyNb"),r=i("M9IT"),l=i("+0xr"),b=i("nhqp"),u=i("AytR"),m=i("fXoL"),d=i("tk/3"),h=i("R5+c"),g=((o=function(){function t(a,s){e(this,t),this.http=a,this._handelErrorResponseService=s,this.APIEndpoint=u.a.baseUrl}return a(t,[{key:"getMessageList",value:function(e,t){return this.http.get(this.APIEndpoint+"message-list/"+t+"?page="+e)}},{key:"sendMessage",value:function(e){return this.http.post(this.APIEndpoint+"message-add",e)}},{key:"getNurseList",value:function(){return this.http.get(this.APIEndpoint+"nurse-dropdown")}},{key:"deleteMessageById",value:function(e){return this.http.post(this.APIEndpoint+"message-delete/"+e,e)}},{key:"searchMessagesAPI",value:function(e){return this.http.post(this.APIEndpoint+"messages/search",e)}},{key:"readMessageAPI",value:function(e){return this.http.post(this.APIEndpoint+"message-view/"+e,e)}},{key:"deleteOneMessageAPI",value:function(e){return this.http.post(this.APIEndpoint+"message-delete/"+e,e)}},{key:"messageArchiveAPI",value:function(e){return this.http.post(this.APIEndpoint+"message-archive/"+e,e)}}]),t}()).\u0275fac=function(e){return new(e||o)(m.cc(d.b),m.cc(h.a))},o.\u0275prov=m.Lb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),p=i("0IaG"),f=i("z3Rz"),v=i("kmnG"),C=i("qFsG"),k=i("bTqV"),_=i("NFeN"),y=i("Xa2L"),w=i("d2a5"),D=i("KpFd"),U=i("yDRh");function V(e,t){1&e&&(m.Vb(0,"div",33),m.Qb(1,"mat-spinner",34),m.Ub())}function x(e,t){1&e&&m.Qb(0,"th",35)}function M(e,t){1&e&&(m.Vb(0,"div",44),m.Vb(1,"mat-icon"),m.Nc(2,"schedule"),m.Ub(),m.Ub())}function L(e,t){if(1&e){var a=m.Wb();m.Vb(0,"td",36),m.gc("click",function(e){return e.stopPropagation()}),m.Vb(1,"label",37),m.Vb(2,"input",38),m.gc("click",function(e){return m.Ec(a),m.kc().getCheckedItemId(e)}),m.Ub(),m.jc(),m.Vb(3,"svg",39),m.Qb(4,"path",40),m.Ub(),m.Ub(),m.ic(),m.Vb(5,"div",41),m.Qb(6,"img",42),m.Lc(7,M,3,0,"div",43),m.Ub(),m.Ub()}if(2&e){var s=t.$implicit;m.Cb(2),m.sc("value",s.id),m.Cb(5),m.sc("ngIf",0===s.sent)}}function I(e,t){1&e&&(m.Vb(0,"th",45),m.Nc(1," User"),m.Ub())}function N(e,t){if(1&e&&(m.Vb(0,"td",46),m.Nc(1),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",a.to_name," ")}}function F(e,t){1&e&&(m.Vb(0,"th",45),m.Nc(1," Subject "),m.Ub())}function P(e,t){if(1&e&&(m.Vb(0,"td",46),m.Nc(1),m.lc(2,"textLimit"),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",m.oc(2,1,a.subject,0,10)," ")}}function T(e,t){1&e&&(m.Vb(0,"th",45),m.Nc(1," Preview "),m.Ub())}function S(e,t){if(1&e&&(m.Vb(0,"td",47),m.Nc(1),m.lc(2,"textLimit"),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",m.oc(2,1,a.body,0,50)," ")}}function O(e,t){1&e&&(m.Vb(0,"th",48),m.Nc(1,"Date "),m.Ub())}function A(e,t){if(1&e&&(m.Vb(0,"td",49),m.Nc(1),m.lc(2,"dateFormat"),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",m.mc(2,1,a.created_at)," ")}}function j(e,t){1&e&&m.Qb(0,"tr",50)}var Q=function(e){return["read-message/",e]};function R(e,t){1&e&&m.Qb(0,"tr",51),2&e&&m.sc("routerLink",m.wc(1,Q,t.$implicit.id))}function E(e,t){if(1&e){var a=m.Wb();m.Vb(0,"app-paginator-component",52),m.gc("pageNo",function(e){return m.Ec(a),m.kc().displayPageNo(e)}),m.Ub()}if(2&e){var s=m.kc();m.sc("lPage",s.lastPage)("pageNumber",s.pageNumber)}}function H(e,t){1&e&&(m.Vb(0,"div",53),m.Qb(1,"img",54),m.Ub())}var Y,B,G=function(){return["/messages/new-message"]},W=((Y=function(){function t(a,s,i){e(this,t),this._messageService=a,this.dialog=s,this._toastr=i,this.displayedColumns=["checkbox","user","subject","preview","messagedate"],this.dataSource=new l.k,this.pageCount=1,this.lastPage=0,this.msgIds="",this.pageNumberHolder=1,this.dataNotFound=!1,this.delete_modal_response=!1,this.delete_btn_flag=!0,this.scrollFlag=!1,this.pagination_flag=!1,this.id_arr=[],this.isLoading=!0,this.pageNumber=1}return a(t,[{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.fetchMessageList(this.pageCount,u.a.MAX_ROW_LENGTH)}},{key:"openDialog",value:function(){var e=this;this.dialog.open(b.a,{data:{msg:"Are you sure you want to delete?"}}).afterClosed().subscribe(function(t){"1"==t&&e.deleteMessage()})}},{key:"fetchMessageList",value:function(e,t){var a=this;this.delete_btn_flag=!0,this.subscription=this._messageService.getMessageList(e,t).subscribe(function(e){e.status&&(a.dataSource=new l.k(e.messages.data),a.lastPage=e.messages.last_page,a.pageNumber=e.messages.current_page,0===e.messages.total&&(a.dataNotFound=!0),e.messages.current_page>a.lastPage&&a.fetchMessageList(a.lastPage,u.a.MAX_ROW_LENGTH),a.pagination_flag=!0,a.isLoading=!1)},function(e){throw e})}},{key:"displayPageNo",value:function(e){this.fetchMessageList(e,u.a.MAX_ROW_LENGTH),this.pageNumberHolder=e}},{key:"getCheckedItemId",value:function(e){e.target.checked?this.id_arr.push(e.target.value):this.id_arr.splice(this.id_arr.indexOf(e.target.value),1),this.delete_btn_flag=!(this.id_arr.length>0)}},{key:"makeString",value:function(){for(var e=0;e<this.id_arr.length;e++)this.msgIds=this.msgIds+this.id_arr[e]+",";this.msgIds=this.msgIds.substring(0,this.msgIds.length-1)}},{key:"deleteMessage",value:function(){var e=this;this.msgIds="",this.makeString(),this.subscription=this._messageService.deleteMessageById(this.msgIds).subscribe(function(t){var a=Object.values(t);e.isLoading=!0,e._toastr.showAlert(a[2],"success"),e.fetchMessageList(e.pageNumberHolder,u.a.MAX_ROW_LENGTH)},function(e){throw e})}},{key:"searchMessages",value:function(e){var t=this,a={string:e.target.value,fields:"body"},s=e.target.value;s&&s.length?(this.pagination_flag=!1,this.subscription=this._messageService.searchMessagesAPI(a).subscribe(function(e){t.dataSource=new l.k(e.messages),t.scrollFlag=e.messages.length>u.a.MAX_ROW_LENGTH})):(this.scrollFlag=!1,this.fetchMessageList(this.pageCount,u.a.MAX_ROW_LENGTH))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||Y)(m.Pb(g),m.Pb(p.b),m.Pb(f.a))},Y.\u0275cmp=m.Jb({type:Y,selectors:[["app-messages"]],viewQuery:function(e,t){var a;1&e&&m.Rc(r.a,1),2&e&&m.zc(a=m.hc())&&(t.paginator=a.first)},decls:40,vars:10,consts:[[1,"col-lg-12","right-panel-height"],[1,"white-wrapper"],["style","display: flex;\njustify-content: center;\nalign-items: center;\nposition: absolute;\ntop: 40%;\nleft:45%;",4,"ngIf"],[1,"box-heading"],["src","assets/img/arrow2.png",1,"float-right"],[1,"w-100","mb-3"],[1,"row"],[1,"col-lg-8","plane-ling"],[1,"form-inline","has-search"],["appearance","standard",1,"example-full-width"],[1,"fa","fa-search","form-control-feedback"],["matInput","","placeholder","Search","autocomplete","off",1,"form-control",3,"keyup"],["mat-stroked-button","","type","button","type","button",1,"regular-btn","ml-3",3,"disabled","click"],[1,"col-lg-4"],["mat-fab","","color","primary","aria-label","Example icon button with a delete icon",1,"float-right",3,"routerLink"],[1,"mat-elevation-z8","no-shadow",3,"ngClass"],["mat-table","",1,"user-table",3,"dataSource"],["matColumnDef","checkbox"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","width","20%",3,"click",4,"matCellDef"],["matColumnDef","user"],["class","text-left","mat-header-cell","",4,"matHeaderCellDef"],["class","text-left","mat-cell","","width","15%",4,"matCellDef"],["matColumnDef","subject"],["matColumnDef","preview"],["class","text-left","mat-cell","","width","40%",4,"matCellDef"],["matColumnDef","messagedate"],["class","text-right","mat-header-cell","",4,"matHeaderCellDef"],["class","text-right","mat-cell","","width","15%",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","page-number",3,"lPage","pageNumber","pageNo",4,"ngIf"],["class","d-block text-center",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","position","absolute","top","40%","left","45%"],["color","primary"],["mat-header-cell",""],["mat-cell","","width","20%",3,"click"],[1,"checkbox","path","float-left"],["type","checkbox",3,"value","click"],["viewBox","0 0 21 21"],["d","M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"],[1,"box-heading-profile-name","float-left"],["src","assets/img/no-user-image-icon.jpg",1,"profile-image"],["class","schedule-msg",4,"ngIf"],[1,"schedule-msg"],["mat-header-cell","",1,"text-left"],["mat-cell","","width","15%",1,"text-left"],["mat-cell","","width","40%",1,"text-left"],["mat-header-cell","",1,"text-right"],["mat-cell","","width","15%",1,"text-right"],["mat-header-row",""],["mat-row","",3,"routerLink"],[1,"page-number",3,"lPage","pageNumber","pageNo"],[1,"d-block","text-center"],["src","../../../assets/img/nodata.png"]],template:function(e,t){1&e&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Lc(2,V,2,0,"div",2),m.Vb(3,"h3",3),m.Nc(4,"Messages"),m.Qb(5,"img",4),m.Ub(),m.Vb(6,"div",5),m.Vb(7,"div",6),m.Vb(8,"div",7),m.Vb(9,"div",8),m.Vb(10,"mat-form-field",9),m.Qb(11,"span",10),m.Vb(12,"input",11),m.gc("keyup",function(e){return t.searchMessages(e)}),m.Ub(),m.Ub(),m.Vb(13,"button",12),m.gc("click",function(){return t.openDialog()}),m.Nc(14," Delete"),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"div",13),m.Vb(16,"button",14),m.Vb(17,"mat-icon"),m.Nc(18,"add"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(19,"div",15),m.Vb(20,"table",16),m.Tb(21,17),m.Lc(22,x,1,0,"th",18),m.Lc(23,L,8,2,"td",19),m.Sb(),m.Tb(24,20),m.Lc(25,I,2,0,"th",21),m.Lc(26,N,2,1,"td",22),m.Sb(),m.Tb(27,23),m.Lc(28,F,2,0,"th",21),m.Lc(29,P,3,5,"td",22),m.Sb(),m.Tb(30,24),m.Lc(31,T,2,0,"th",21),m.Lc(32,S,3,5,"td",25),m.Sb(),m.Tb(33,26),m.Lc(34,O,2,0,"th",27),m.Lc(35,A,3,3,"td",28),m.Sb(),m.Lc(36,j,1,0,"tr",29),m.Lc(37,R,1,3,"tr",30),m.Ub(),m.Lc(38,E,1,2,"app-paginator-component",31),m.Ub(),m.Lc(39,H,2,0,"div",32),m.Ub(),m.Ub()),2&e&&(m.Cb(2),m.sc("ngIf",t.isLoading),m.Cb(11),m.sc("disabled",t.delete_btn_flag),m.Cb(3),m.sc("routerLink",m.vc(9,G)),m.Cb(3),m.sc("ngClass",t.scrollFlag?"ex1":""),m.Cb(1),m.sc("dataSource",t.dataSource),m.Cb(16),m.sc("matHeaderRowDef",t.displayedColumns),m.Cb(1),m.sc("matRowDefColumns",t.displayedColumns),m.Cb(1),m.sc("ngIf",t.pagination_flag),m.Cb(1),m.sc("ngIf",t.dataNotFound))},directives:[n.m,v.b,C.b,k.a,c.g,_.a,n.k,l.j,l.c,l.e,l.b,l.g,l.i,y.b,l.d,l.a,l.f,l.h,w.a],pipes:[D.a,U.a],styles:["div.ex1[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}div.ex1[_ngcontent-%COMP%]{max-height:490px;min-height:0;overflow-y:scroll}.view-message[_ngcontent-%COMP%]:focus{border:none;outline:none}"]}),Y),$=i("3Pt+"),q=i("JX91"),X=i("lJxs"),z=i("EQBp"),J=i("A5z7"),K=i("/1cH"),Z=i("FKr1"),ee=i("wd/R"),te=i("iadO"),ae=i("r3oX"),se=ee,ie=((B=function(){function t(){e(this,t),this.currentDateTime=new Date,this.scheduleData=new m.o;var a=se(new Date).format("YYYY-MM-DD"),s=se(a).add(6,"months"),i=se(s).format("YYYY-MM-DD"),o=(new Date).getFullYear();this.minDate=new Date(o,parseInt(se(a).format("MM"))-1,parseInt(se(a).format("DD"))),this.maxDate=new Date(o,parseInt(se(i).format("MM"))-1,parseInt(se(i).format("DD")))}return a(t,[{key:"ngOnInit",value:function(){}},{key:"sendDateTime",value:function(){this.pickDate=se(this.pickDate).format("YYYY-MM-DD"),this.currentDateTime=se(this.currentDateTime).format("YYYY-MM-DD HH:mm"),this.scheduleData.emit({userDateTime:this.pickTime,currentDateTime:this.currentDateTime,scheduleFlag:!0}),this.pickTime=void 0}},{key:"cancelSchedule",value:function(){this.scheduleData.emit({scheduleFlag:!1})}}]),t}()).\u0275fac=function(e){return new(e||B)},B.\u0275cmp=m.Jb({type:B,selectors:[["app-schedule"]],outputs:{scheduleData:"scheduleData"},decls:14,vars:10,consts:[[1,"clearfix"],["appearance","fill",1,"material-div-datepickers"],["matInput","","placeholder","Pick a date",3,"matDatepicker","ngModel","min","max","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"toggle-example"],["readonly","","placeholder","Pick a time",3,"ngxTimepicker","disableClick","ngModel","ngModelChange"],[3,"for"],[3,"minutesGap"],["toggleTimepicker",""],[1,"btn-section"],["type","button","name","","value","Confirm Schedule?",1,"d-block","other-submit",3,"click"],["type","button","name","","value","Cancel",1,"d-block","other-submit",3,"click"]],template:function(e,t){if(1&e&&(m.Qb(0,"div",0),m.Vb(1,"mat-form-field",1),m.Vb(2,"input",2),m.gc("ngModelChange",function(e){return t.pickDate=e}),m.Ub(),m.Qb(3,"mat-datepicker-toggle",3),m.Qb(4,"mat-datepicker",null,4),m.Ub(),m.Vb(6,"div",5),m.Vb(7,"input",6),m.gc("ngModelChange",function(e){return t.pickTime=e}),m.Ub(),m.Qb(8,"ngx-material-timepicker-toggle",7),m.Qb(9,"ngx-material-timepicker",8,9),m.Ub(),m.Vb(11,"div",10),m.Vb(12,"input",11),m.gc("click",function(){return t.sendDateTime()}),m.Ub(),m.Vb(13,"input",12),m.gc("click",function(){return t.cancelSchedule()}),m.Ub(),m.Ub()),2&e){var a=m.Ac(5),s=m.Ac(10);m.Cb(2),m.sc("matDatepicker",a)("ngModel",t.pickDate)("min",t.minDate)("max",t.maxDate),m.Cb(1),m.sc("for",a),m.Cb(4),m.sc("ngxTimepicker",s)("disableClick",!1)("ngModel",t.pickTime),m.Cb(1),m.sc("for",s),m.Cb(1),m.sc("minutesGap",5)}},directives:[v.b,C.b,te.c,$.d,$.s,$.v,te.e,v.e,te.b,ae.c,ae.d,ae.a],styles:[""]}),B);function oe(e,t){1&e&&(m.Vb(0,"mat-icon",31),m.Nc(1,"cancel"),m.Ub())}function ne(e,t){if(1&e){var a=m.Wb();m.Vb(0,"mat-chip",29),m.gc("removed",function(){m.Ec(a);var e=t.$implicit;return m.kc().removeMailNurseFromTo(e)}),m.Nc(1),m.Lc(2,oe,2,0,"mat-icon",30),m.Ub()}if(2&e){var s=t.$implicit,i=m.kc();m.sc("selectable",i.selectable)("removable",i.removable),m.Cb(1),m.Pc(" ",s," "),m.Cb(1),m.sc("ngIf",i.removable)}}function ce(e,t){if(1&e&&(m.Vb(0,"span",32),m.Nc(1),m.Ub()),2&e){var a=m.kc();m.Cb(1),m.Oc(a.replyTo)}}function re(e,t){if(1&e&&(m.Vb(0,"mat-option",37),m.Nc(1),m.Ub()),2&e){var a=t.$implicit;m.sc("value",a),m.Cb(1),m.Pc(" ",a," ")}}function le(e,t){if(1&e){var a=m.Wb();m.Vb(0,"div",11),m.Vb(1,"mat-form-field",12),m.Qb(2,"input",33),m.Vb(3,"mat-autocomplete",34,35),m.gc("optionSelected",function(e){return m.Ec(a),m.kc().getToLists(e)}),m.Lc(5,re,2,2,"mat-option",36),m.lc(6,"async"),m.Ub(),m.Ub(),m.Ub()}if(2&e){var s=m.Ac(4),i=m.kc();m.sc("ngClass",i.toControl.hasError("required")&&i.toControl.touched?"red-box":"blue-box"),m.Cb(2),m.sc("formControl",i.toControl)("matAutocomplete",s),m.Cb(3),m.sc("ngForOf",m.mc(6,4,i.filteredOptions))}}function be(e,t){if(1&e){var a=m.Wb();m.Vb(0,"app-schedule",38),m.gc("scheduleData",function(e){return m.Ec(a),m.kc().getScheduleData(e)}),m.Ub()}}function ue(e,t){if(1&e){var a=m.Wb();m.Vb(0,"input",39),m.gc("click",function(){return m.Ec(a),m.kc().scheduleFlag=!0}),m.Ub()}if(2&e){var s=m.kc();m.sc("disabled",!s.composeMessageForm.valid)}}function me(e,t){if(1&e){var a=m.Wb();m.Vb(0,"input",40),m.gc("click",function(){return m.Ec(a),m.kc().send()}),m.Ub()}if(2&e){var s=m.kc();m.sc("disabled",!s.composeMessageForm.valid)}}var de,he=((de=function(){function t(a,s,i,o,n,c){var r=this;e(this,t),this.formBuilder=a,this._messageService=s,this.router=i,this._toastr=o,this.activatedRoute=n,this._nav=c,this.toControl=new $.h,this.ccControl=new $.h,this.options=[],this.options2=[],this.msg_data="Data",this.scheduleFlag=!1,this.pageTitle="New Message",this.msgIds=void 0,this.hideToFlag=!1,this.name_arr_to=[],this.name_arr_cc=[],this.mode=1,this.selectable=!0,this.removable=!0,this.removeMailNurseFromTo=function(e){r.name_arr_to.splice(r.name_arr_to.indexOf(e),1),r.msgIds="",r.makeString(r.name_arr_to),""===r.msgIds&&r._nav.navigateTo(3===r.mode?"nurse-manager":"messages")},this.removeMailNurseFromCC=function(e){r.name_arr_cc.splice(r.name_arr_cc.indexOf(e),1),r.msgIds="",r.makeString(r.name_arr_cc)},this.getToLists=function(e){2===r.mode&&1===r.name_arr_to.length||r.name_arr_to.includes(e.option.value)||r.name_arr_to.push(e.option.value),r.toControl.setValue(""),r.options.splice(r.options.indexOf(e.option.value),1)},this.getCCLists=function(e){2===r.mode&&1===r.name_arr_cc.length||r.name_arr_cc.includes(e.option.value)||r.name_arr_cc.push(e.option.value),r.ccControl.setValue(""),r.options.splice(r.options.indexOf(e.option.value),1)},this.getNurseId=function(e){return r.options2.find(function(t){return 0===t.nurse_name.indexOf(e)}).nurse_id},this.getNurseNamesFromID=function(e){return r.options2.find(function(t){return t.nurse_id===e}).nurse_name},this.validation_msgs={toControl:[{type:"invalidAutocompleteObject",message:"Contact name not recognized. Click one of the autocomplete options."},{type:"required",message:"Contact is required."}],phoneLabelAutocompleteControl:[{type:"invalidAutocompleteString",message:"Phone label not recognized. Click one of the autocomplete options."},{type:"required",message:"Phone label is required."}]}}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.getNurseNames(),this.routeSub=this.activatedRoute.params.subscribe(function(t){e.msgIds=t._id,e.msgIds&&function(){e.hideToFlag=!0;for(var t=e.msgIds.split(","),a=function(a){setTimeout(function(){e.name_arr_to.push(e.getNurseNamesFromID(JSON.parse(t[a])))},2e3)},s=0;s<t.length;s++)a(s);e.mode=3}()}),this.generateForm();var t=this.activatedRoute.snapshot.data.replydata;t&&(this.replyData=t.messageData,this.pageTitle="Reply",this.mode=2,this.replyTo=this.replyData.to_name,this.hideToFlag=!0,this.composeMessageForm.patchValue({subject:"Re:"+this.replyData.subject,urgent:this.replyData.urgent,todo:this.replyData.todo}));var a=this.activatedRoute.snapshot.data.forwarddata;a&&(this.replyData=a.messageData,this.pageTitle="Forward",this.mode=1,this.composeMessageForm.patchValue({subject:this.replyData.subject,body:this.replyData.body,urgent:this.replyData.urgent,todo:this.replyData.todo})),this.filteredOptions=this.toControl.valueChanges.pipe(Object(q.a)(""),Object(X.a)(function(t){return e._filter(t)})),this.filteredOptions2=this.ccControl.valueChanges.pipe(Object(q.a)(""),Object(X.a)(function(t){return e._filter(t)}))}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.options.filter(function(e){return 0===e.toLowerCase().indexOf(t)})}},{key:"generateForm",value:function(){this.composeMessageForm=this.formBuilder.group({subject:["",$.A.required],body:["",$.A.required],urgent:[0],todo:[0],to_id:[],cc_nurse_id:[],sent:[0],schedule:[],current_time:[]})}},{key:"makeString",value:function(e){for(var t=0;t<e.length;t++)this.msgIds=this.msgIds+this.getNurseId(e[t])+",";this.msgIds=this.msgIds.substring(0,this.msgIds.length-1)}},{key:"getNurseNames",value:function(){var e=this;this.subscription=this._messageService.getNurseList().subscribe(function(t){t.status&&t.nursedropdown.forEach(function(t){e.options.push(t.nurse_name),e.options2.push(t)})},function(e){throw e})}},{key:"send",value:function(){var e=this;this.composeMessageForm.value.sent=1,this.composeMessageForm.value.todo&&(this.composeMessageForm.value.todo=1),this.composeMessageForm.value.urgent&&(this.composeMessageForm.value.urgent=1),delete this.composeMessageForm.value.schedule,delete this.composeMessageForm.value.current_time,(null!==this.toControl.value||this.toControl.value)&&(this.msgIds="",this.makeString(this.name_arr_to),this.composeMessageForm.value.to_id=this.msgIds),(null!==this.ccControl.value||this.ccControl.value)&&(this.msgIds="",this.makeString(this.name_arr_cc),this.composeMessageForm.value.cc_nurse_id=this.msgIds),2===this.mode&&(this.composeMessageForm.value.to_id=this.getNurseId(this.replyTo)),this.subscription=this._messageService.sendMessage(this.composeMessageForm.value).subscribe(function(t){var a=Object.values(t);e._toastr.showAlert(a[0],"success"),e.router.navigateByUrl("messages")},function(e){throw e})}},{key:"getScheduleData",value:function(e){var t=this;this.scheduleFlag=e.scheduleFlag,this.composeMessageForm.value.schedule=e.userDateTime,this.composeMessageForm.value.current_time=e.currentDateTime,!1!==this.scheduleFlag&&(this.composeMessageForm.value.sent=0,this.composeMessageForm.value.todo&&(this.composeMessageForm.value.todo=1),this.composeMessageForm.value.urgent&&(this.composeMessageForm.value.urgent=1),(null!==this.toControl.value||this.toControl.value)&&(this.msgIds="",this.makeString(this.name_arr_to),this.composeMessageForm.value.to_id=this.msgIds),(null!==this.ccControl.value||this.ccControl.value)&&(this.msgIds="",this.makeString(this.name_arr_cc),this.composeMessageForm.value.cc_nurse_id=this.msgIds),this.subscription=this._messageService.sendMessage(this.composeMessageForm.value).subscribe(function(e){var a=Object.values(e);t._toastr.showAlert(a[0],"success"),t.router.navigateByUrl("messages"),t.router.navigateByUrl("messages")},function(e){throw e}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||de)(m.Pb($.g),m.Pb(g),m.Pb(c.f),m.Pb(f.a),m.Pb(c.a),m.Pb(z.a))},de.\u0275cmp=m.Jb({type:de,selectors:[["app-new-message"]],decls:42,vars:12,consts:[[1,"col-lg-12","right-panel-height"],[1,"white-wrapper"],[1,"box-heading"],["src","assets/img/arrow2.png",1,"float-right"],["autocomplete","off",3,"formGroup"],[1,"row"],[1,"col-lg-12"],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[1,"col-lg-6"],["style","padding:6px 10px;background: #ccc; border-color:#666 ;","class","blue-box",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["appearance","standard"],["type","text","matInput","","formControlName","subject","placeholder","Subject:",1,"border-0","invisible-fild",3,"maxlength"],[1,"col-lg-8"],["name","","formControlName","body",1,"big-t-area",3,"maxlength"],[1,"col-lg-4","mt-3","other-chbox","other-chbox-custom"],[1,"checkbox","path","float-left"],["type","checkbox","formControlName","urgent"],["viewBox","0 0 21 21"],["d","M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"],[1,"lb-txt"],[1,"clearfix"],["type","checkbox","formControlName","todo"],[1,"schedule-wrapper"],[3,"scheduleData",4,"ngIf"],[1,"btn-section"],["type","button","name","","value","Schedule","class","d-block other-submit",3,"disabled","click",4,"ngIf"],["type","submit","name","","value","Send","class","d-block other-submit",3,"disabled","click",4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"blue-box",2,"padding","6px 10px","background","#ccc","border-color","#666"],["type","text","placeholder","To:","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"scheduleData"],["type","button","name","","value","Schedule",1,"d-block","other-submit",3,"disabled","click"],["type","submit","name","","value","Send",1,"d-block","other-submit",3,"disabled","click"]],template:function(e,t){1&e&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"h3",2),m.Nc(3),m.Qb(4,"img",3),m.Ub(),m.Vb(5,"form",4),m.Vb(6,"div",5),m.Vb(7,"div",6),m.Vb(8,"mat-chip-list"),m.Lc(9,ne,3,4,"mat-chip",7),m.Ub(),m.Ub(),m.Vb(10,"div",8),m.Lc(11,ce,2,1,"span",9),m.Lc(12,le,7,6,"div",10),m.Vb(13,"div",11),m.Vb(14,"mat-form-field",12),m.Qb(15,"input",13),m.Ub(),m.Ub(),m.Ub(),m.Qb(16,"div",8),m.Ub(),m.Vb(17,"div",5),m.Vb(18,"div",6),m.Vb(19,"div",11),m.Vb(20,"div",5),m.Vb(21,"div",14),m.Qb(22,"textarea",15),m.Ub(),m.Vb(23,"div",16),m.Vb(24,"label",17),m.Qb(25,"input",18),m.jc(),m.Vb(26,"svg",19),m.Qb(27,"path",20),m.Ub(),m.Ub(),m.ic(),m.Vb(28,"label",21),m.Nc(29,"Urgent"),m.Ub(),m.Qb(30,"div",22),m.Vb(31,"label",17),m.Qb(32,"input",23),m.jc(),m.Vb(33,"svg",19),m.Qb(34,"path",20),m.Ub(),m.Ub(),m.ic(),m.Vb(35,"label",21),m.Nc(36,"To-Do"),m.Ub(),m.Vb(37,"div",24),m.Lc(38,be,1,0,"app-schedule",25),m.Ub(),m.Vb(39,"div",26),m.Lc(40,ue,1,1,"input",27),m.Lc(41,me,1,1,"input",28),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&e&&(m.Cb(3),m.Oc(t.pageTitle),m.Cb(2),m.sc("formGroup",t.composeMessageForm),m.Cb(4),m.sc("ngForOf",t.name_arr_to),m.Cb(2),m.sc("ngIf",t.replyTo),m.Cb(1),m.sc("ngIf",!t.hideToFlag),m.Cb(1),m.sc("ngClass",t.composeMessageForm.controls.subject.touched&&t.composeMessageForm.controls.subject.hasError("required")?"red-box":t.composeMessageForm.controls.subject.hasError("maxlength")?"yellow-box":"blue-box"),m.Cb(2),m.sc("maxlength",50),m.Cb(4),m.sc("ngClass",t.composeMessageForm.controls.body.touched&&t.composeMessageForm.controls.body.hasError("required")?"red-box col-lg-12":t.composeMessageForm.controls.body.hasError("maxlength")?"yellow-box col-lg-12":"blue-box col-lg-12"),m.Cb(3),m.sc("maxlength",500),m.Cb(16),m.sc("ngIf",t.scheduleFlag),m.Cb(2),m.sc("ngIf",!t.scheduleFlag),m.Cb(1),m.sc("ngIf",!t.scheduleFlag))},directives:[$.B,$.t,$.l,J.b,n.l,n.m,n.k,v.b,C.b,$.d,$.s,$.j,$.o,$.a,J.a,_.a,J.c,K.c,$.i,K.a,Z.m,ie],pipes:[n.b],styles:[".mat-chip.mat-standard-chip[_ngcontent-%COMP%]{background-color:#f3f7ff!important;color:#6b8ff4!important;font-size:12px}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#508ff4;position:relative;top:4px;opacity:1}"]}),de);function ge(e,t){1&e&&m.Qb(0,"th",42)}function pe(e,t){1&e&&m.Qb(0,"td",43)}function fe(e,t){1&e&&(m.Vb(0,"th",44),m.Nc(1," User"),m.Ub())}function ve(e,t){1&e&&(m.Vb(0,"th",44),m.Nc(1," Subject "),m.Ub())}function Ce(e,t){1&e&&(m.Vb(0,"th",45),m.Nc(1," Preview "),m.Ub())}function ke(e,t){1&e&&(m.Vb(0,"th",46),m.Nc(1,"Date "),m.Ub())}function _e(e,t){1&e&&m.Qb(0,"tr",47)}function ye(e,t){1&e&&(m.Vb(0,"td",48),m.Vb(1,"label",35),m.Qb(2,"input",49),m.jc(),m.Vb(3,"svg",37),m.Qb(4,"path",38),m.Ub(),m.Ub(),m.ic(),m.Vb(5,"div",50),m.Qb(6,"img",51),m.Ub(),m.Ub()),2&e&&(m.Cb(2),m.sc("disabled",!0))}function we(e,t){if(1&e&&(m.Vb(0,"td",52),m.Nc(1),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",a.to_name," ")}}function De(e,t){if(1&e&&(m.Vb(0,"td",52),m.Nc(1),m.lc(2,"textLimit"),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",m.oc(2,1,a.subject,0,10)," ")}}function Ue(e,t){if(1&e&&(m.Vb(0,"td",53),m.Nc(1),m.lc(2,"textLimit"),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",m.oc(2,1,a.body,0,10)," ")}}function Ve(e,t){if(1&e&&(m.Vb(0,"td",54),m.Nc(1),m.lc(2,"dateFormat"),m.Ub()),2&e){var a=t.$implicit;m.Cb(1),m.Pc(" ",m.mc(2,1,a.created_at)," ")}}function xe(e,t){1&e&&m.Qb(0,"tr",55)}function Me(e,t){if(1&e&&(m.Vb(0,"div"),m.Qb(1,"div",40),m.Vb(2,"h3",56),m.Nc(3,"Scheduled at:"),m.Ub(),m.Vb(4,"p",33),m.Nc(5),m.lc(6,"dateFormat"),m.Ub(),m.Vb(7,"p",34),m.Nc(8),m.lc(9,"date"),m.Ub(),m.Ub()),2&e){var a=m.kc();m.Cb(5),m.Pc("Date:",m.mc(6,2,a.msgData.schedule),""),m.Cb(3),m.Pc("Time:",m.nc(9,4,a.msgData.schedule,"shortTime"),"")}}var Le,Ie,Ne,Fe,Pe=function(){return["/messages/new-message"]},Te=((Ie=function(){function t(a,s,i,o,n,c){var r=this;e(this,t),this.activatedRoute=a,this._messageService=s,this.dialog=i,this._toastr=o,this.router=n,this._nav=c,this.displayedColumns=["checkbox","user","subject","preview","messagedate"],this.dataSource=new l.k,this.archiveMessage=function(){r.subscription=r._messageService.messageArchiveAPI(r.msgData.id).subscribe(function(e){r._toastr.showAlert(e.message,"success"),r._nav.navigateTo("messages")})},this.replyMessage=function(){r._nav.navigateTo("messages/reply-message/"+r.msgData.id)},this.forwardMessage=function(){r._nav.navigateTo("messages/forward-message/"+r.msgData.id)}}return a(t,[{key:"ngOnInit",value:function(){var e=this,t=[];t.push(this.activatedRoute.snapshot.data.data.messageData),this.msgData=t[0],this.dataSource=new l.k(t),setTimeout(function(){e.msgData.urgent=1===e.msgData.urgent,e.msgData.todo=1===e.msgData.todo},100)}},{key:"openDialog",value:function(){var e=this;this.dialog.open(b.a,{data:{msg:"Are you sure you want to delete?"}}).afterClosed().subscribe(function(t){"1"==t&&e.deleteMsg()})}},{key:"deleteMsg",value:function(){var e=this;this.subscription=this._messageService.deleteMessageById(this.msgData.id).subscribe(function(t){e._toastr.showAlert(t.message,"success"),e._nav.navigateTo("messages")})}}]),t}()).\u0275fac=function(e){return new(e||Ie)(m.Pb(c.a),m.Pb(g),m.Pb(p.b),m.Pb(f.a),m.Pb(c.f),m.Pb(z.a))},Ie.\u0275cmp=m.Jb({type:Ie,selectors:[["app-read-message"]],decls:75,vars:20,consts:[[1,"col-lg-12"],[1,"white-wrapper"],[1,"box-heading"],["src","assets/img/arrow2.png",1,"float-right"],[1,"w-100","mb-3"],[1,"row"],[1,"col-lg-8","plane-ling"],[1,"form-inline","has-search"],["mat-stroked-button","","type","button","type","button",1,"regular-btn","ml-3",3,"click"],[1,"col-lg-4"],["mat-fab","","color","primary","aria-label","Example icon button with a delete icon",1,"float-right",3,"routerLink"],[1,"mat-elevation-z8","no-shadow"],["mat-table","",1,"user-table",3,"dataSource"],["matColumnDef","checkbox"],["mat-header-cell","","width","15%",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["class","text-left","mat-header-cell","","width","15%",4,"matHeaderCellDef"],["matColumnDef","subject"],["matColumnDef","preview"],["class","text-left","mat-header-cell","","width","40%",4,"matHeaderCellDef"],["matColumnDef","messagedate"],["class","text-right","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],[1,"blue-border"],["mat-cell","","width","15%",4,"matCellDef"],["class","text-left","mat-cell","","width","15%",4,"matCellDef"],["class","text-left","mat-cell","","width","40%",4,"matCellDef"],["class","text-right","mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"col-lg-8"],["name","",1,"big-t-area","custom-big-t","mb-3","mt-23",3,"disabled"],[1,"col-lg-4","mt-3","other-chbox","other-chbox-custom"],[1,"mb-0","date-time"],[1,"date-time"],[1,"checkbox","path","float-left"],["type","checkbox",3,"checked","disabled"],["viewBox","0 0 21 21"],["d","M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"],[1,"lb-txt"],[1,"clearfix"],[4,"ngIf"],["mat-header-cell","","width","15%"],["mat-cell",""],["mat-header-cell","","width","15%",1,"text-left"],["mat-header-cell","","width","40%",1,"text-left"],["mat-header-cell","",1,"text-right"],["mat-header-row",""],["mat-cell","","width","15%"],["type","checkbox","checked","checked",3,"disabled"],[1,"box-heading-profile-name","float-left"],["src","assets/img/no-user-image-icon.jpg",1,"profile-image"],["mat-cell","","width","15%",1,"text-left"],["mat-cell","","width","40%",1,"text-left"],["mat-cell","",1,"text-right"],["mat-row",""],[1,"mb-0","mt-3","color-blue"]],template:function(e,t){1&e&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"h3",2),m.Nc(3,"Messages"),m.Qb(4,"img",3),m.Ub(),m.Vb(5,"div",4),m.Vb(6,"div",5),m.Vb(7,"div",6),m.Vb(8,"div",7),m.Vb(9,"button",8),m.gc("click",function(){return t.openDialog()}),m.Nc(10," Delete"),m.Ub(),m.Vb(11,"button",8),m.gc("click",function(){return t.replyMessage()}),m.Nc(12," Reply"),m.Ub(),m.Vb(13,"button",8),m.gc("click",function(){return t.forwardMessage()}),m.Nc(14," Forward"),m.Ub(),m.Vb(15,"button",8),m.gc("click",function(){return t.archiveMessage()}),m.Nc(16," Archive"),m.Ub(),m.Ub(),m.Ub(),m.Vb(17,"div",9),m.Vb(18,"button",10),m.Vb(19,"mat-icon"),m.Nc(20,"add"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(21,"div",11),m.Vb(22,"table",12),m.Tb(23,13),m.Lc(24,ge,1,0,"th",14),m.Lc(25,pe,1,0,"td",15),m.Sb(),m.Tb(26,16),m.Lc(27,fe,2,0,"th",17),m.Sb(),m.Tb(28,18),m.Lc(29,ve,2,0,"th",17),m.Sb(),m.Tb(30,19),m.Lc(31,Ce,2,0,"th",20),m.Sb(),m.Tb(32,21),m.Lc(33,ke,2,0,"th",22),m.Sb(),m.Lc(34,_e,1,0,"tr",23),m.Ub(),m.Vb(35,"div",5),m.Vb(36,"div",0),m.Vb(37,"div",24),m.Vb(38,"table",12),m.Tb(39,13),m.Lc(40,ye,7,1,"td",25),m.Sb(),m.Tb(41,16),m.Lc(42,we,2,1,"td",26),m.Sb(),m.Tb(43,18),m.Lc(44,De,3,5,"td",26),m.Sb(),m.Tb(45,19),m.Lc(46,Ue,3,5,"td",27),m.Sb(),m.Tb(47,21),m.Lc(48,Ve,3,3,"td",28),m.Sb(),m.Lc(49,xe,1,0,"tr",29),m.Ub(),m.Vb(50,"div",5),m.Vb(51,"div",30),m.Vb(52,"textarea",31),m.Nc(53),m.Ub(),m.Ub(),m.Vb(54,"div",32),m.Vb(55,"p",33),m.Nc(56),m.lc(57,"dateFormat"),m.Ub(),m.Vb(58,"p",34),m.Nc(59),m.lc(60,"date"),m.Ub(),m.Vb(61,"label",35),m.Qb(62,"input",36),m.jc(),m.Vb(63,"svg",37),m.Qb(64,"path",38),m.Ub(),m.Ub(),m.ic(),m.Vb(65,"label",39),m.Nc(66,"Urgent"),m.Ub(),m.Qb(67,"div",40),m.Vb(68,"label",35),m.Qb(69,"input",36),m.jc(),m.Vb(70,"svg",37),m.Qb(71,"path",38),m.Ub(),m.Ub(),m.ic(),m.Vb(72,"label",39),m.Nc(73,"To-Do"),m.Ub(),m.Lc(74,Me,10,7,"div",41),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&e&&(m.Cb(18),m.sc("routerLink",m.vc(19,Pe)),m.Cb(4),m.sc("dataSource",t.dataSource),m.Cb(12),m.sc("matHeaderRowDef",t.displayedColumns),m.Cb(4),m.sc("dataSource",t.dataSource),m.Cb(11),m.sc("matRowDefColumns",t.displayedColumns),m.Cb(3),m.sc("disabled",!0),m.Cb(1),m.Oc(t.msgData.body),m.Cb(3),m.Pc("Date:",m.mc(57,14,t.msgData.created_at),""),m.Cb(3),m.Pc("Time:",m.nc(60,16,t.msgData.created_at,"shortTime"),""),m.Cb(3),m.sc("checked",t.msgData.urgent)("disabled",!0),m.Cb(7),m.sc("checked",t.msgData.todo)("disabled",!0),m.Cb(5),m.sc("ngIf",null!==t.msgData.schedule))},directives:[k.a,c.g,_.a,l.j,l.c,l.e,l.b,l.g,l.i,n.m,l.d,l.a,l.f,l.h],pipes:[U.a,n.e,D.a],styles:["table[_ngcontent-%COMP%]{width:100%}.custom-big-t[_ngcontent-%COMP%]{width:95%;float:right;height:355px}.date-time[_ngcontent-%COMP%]{font-family:Lato,sans-serif!important;font-size:11px!important}"]}),Ie),Se=((Le=function(){function t(a){e(this,t),this.http=a}return a(t,[{key:"resolve",value:function(e){return this.id=e.paramMap.get("id"),this.http.post(u.a.baseUrl+"message-view/"+this.id,this.id)}}]),t}()).\u0275fac=function(e){return new(e||Le)(m.cc(d.b))},Le.\u0275prov=m.Lb({token:Le,factory:Le.\u0275fac}),Le),Oe=[{path:"",component:W},{path:"new-message",component:he},{path:"read-message/:id",component:Te,resolve:{data:Se}},{path:"reply-message/:id",component:he,resolve:{replydata:Se}},{path:"forward-message/:id",component:he,resolve:{forwarddata:Se}},{path:"message-nurses/:_id",component:he}],Ae=((Ne=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Ne)},Ne.\u0275mod=m.Nb({type:Ne}),Ne.\u0275inj=m.Mb({providers:[Se],imports:[[c.j.forChild(Oe)],c.j]}),Ne),je=i("FpXt"),Qe=((Fe=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Fe)},Fe.\u0275mod=m.Nb({type:Fe}),Fe.\u0275inj=m.Mb({imports:[[n.c,Ae,je.a]]}),Fe)}}])}();