(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"luD+":function(e,t,s){"use strict";s.r(t),s.d(t,"MessagesModule",function(){return Le});var a=s("ofXK"),i=s("tyNb"),o=s("M9IT"),c=s("+0xr"),n=s("nhqp"),r=s("AytR"),l=s("fXoL"),b=s("tk/3"),m=s("R5+c");let h=(()=>{class e{constructor(e,t){this.http=e,this._handelErrorResponseService=t,this.APIEndpoint=r.a.baseUrl}getMessageList(e,t){return this.http.get(this.APIEndpoint+"message-list/"+t+"?page="+e)}sendMessage(e){return this.http.post(this.APIEndpoint+"message-add",e)}getNurseList(){return this.http.get(this.APIEndpoint+"nurse-dropdown")}deleteMessageById(e){return this.http.post(this.APIEndpoint+"message-delete/"+e,e)}searchMessagesAPI(e){return this.http.post(this.APIEndpoint+"messages/search",e)}readMessageAPI(e){return this.http.post(this.APIEndpoint+"message-view/"+e,e)}deleteOneMessageAPI(e){return this.http.post(this.APIEndpoint+"message-delete/"+e,e)}messageArchiveAPI(e){return this.http.post(this.APIEndpoint+"message-archive/"+e,e)}}return e.\u0275fac=function(t){return new(t||e)(l.cc(b.b),l.cc(m.a))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=s("0IaG"),u=s("z3Rz"),g=s("kmnG"),p=s("qFsG"),f=s("bTqV"),v=s("NFeN"),C=s("Xa2L"),_=s("d2a5"),w=s("KpFd"),D=s("yDRh");function U(e,t){1&e&&(l.Vb(0,"div",33),l.Qb(1,"mat-spinner",34),l.Ub())}function V(e,t){1&e&&l.Qb(0,"th",35)}function k(e,t){1&e&&(l.Vb(0,"div",44),l.Vb(1,"mat-icon"),l.Nc(2,"schedule"),l.Ub(),l.Ub())}function x(e,t){if(1&e){const e=l.Wb();l.Vb(0,"td",36),l.gc("click",function(e){return e.stopPropagation()}),l.Vb(1,"label",37),l.Vb(2,"input",38),l.gc("click",function(t){return l.Ec(e),l.kc().getCheckedItemId(t)}),l.Ub(),l.jc(),l.Vb(3,"svg",39),l.Qb(4,"path",40),l.Ub(),l.Ub(),l.ic(),l.Vb(5,"div",41),l.Qb(6,"img",42),l.Lc(7,k,3,0,"div",43),l.Ub(),l.Ub()}if(2&e){const e=t.$implicit;l.Cb(2),l.sc("value",e.id),l.Cb(5),l.sc("ngIf",0===e.sent)}}function M(e,t){1&e&&(l.Vb(0,"th",45),l.Nc(1," User"),l.Ub())}function y(e,t){if(1&e&&(l.Vb(0,"td",46),l.Nc(1),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",e.to_name," ")}}function L(e,t){1&e&&(l.Vb(0,"th",45),l.Nc(1," Subject "),l.Ub())}function I(e,t){if(1&e&&(l.Vb(0,"td",46),l.Nc(1),l.lc(2,"textLimit"),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",l.oc(2,1,e.subject,0,10)," ")}}function N(e,t){1&e&&(l.Vb(0,"th",45),l.Nc(1," Preview "),l.Ub())}function F(e,t){if(1&e&&(l.Vb(0,"td",47),l.Nc(1),l.lc(2,"textLimit"),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",l.oc(2,1,e.body,0,50)," ")}}function P(e,t){1&e&&(l.Vb(0,"th",48),l.Nc(1,"Date "),l.Ub())}function S(e,t){if(1&e&&(l.Vb(0,"td",49),l.Nc(1),l.lc(2,"dateFormat"),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",l.mc(2,1,e.created_at)," ")}}function T(e,t){1&e&&l.Qb(0,"tr",50)}const O=function(e){return["read-message/",e]};function A(e,t){1&e&&l.Qb(0,"tr",51),2&e&&l.sc("routerLink",l.wc(1,O,t.$implicit.id))}function j(e,t){if(1&e){const e=l.Wb();l.Vb(0,"app-paginator-component",52),l.gc("pageNo",function(t){return l.Ec(e),l.kc().displayPageNo(t)}),l.Ub()}if(2&e){const e=l.kc();l.sc("lPage",e.lastPage)("pageNumber",e.pageNumber)}}function Q(e,t){1&e&&(l.Vb(0,"div",53),l.Qb(1,"img",54),l.Ub())}const R=function(){return["/messages/new-message"]};let E=(()=>{class e{constructor(e,t,s){this._messageService=e,this.dialog=t,this._toastr=s,this.displayedColumns=["checkbox","user","subject","preview","messagedate"],this.dataSource=new c.k,this.pageCount=1,this.lastPage=0,this.msgIds="",this.pageNumberHolder=1,this.dataNotFound=!1,this.delete_modal_response=!1,this.delete_btn_flag=!0,this.scrollFlag=!1,this.pagination_flag=!1,this.id_arr=[],this.isLoading=!0,this.pageNumber=1}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.fetchMessageList(this.pageCount,r.a.MAX_ROW_LENGTH)}openDialog(){this.dialog.open(n.a,{data:{msg:"Are you sure you want to delete?"}}).afterClosed().subscribe(e=>{"1"==e&&this.deleteMessage()})}fetchMessageList(e,t){this.delete_btn_flag=!0,this.subscription=this._messageService.getMessageList(e,t).subscribe(e=>{e.status&&(this.dataSource=new c.k(e.messages.data),this.lastPage=e.messages.last_page,this.pageNumber=e.messages.current_page,0===e.messages.total&&(this.dataNotFound=!0),e.messages.current_page>this.lastPage&&this.fetchMessageList(this.lastPage,r.a.MAX_ROW_LENGTH),this.pagination_flag=!0,this.isLoading=!1)},e=>{throw e})}displayPageNo(e){this.fetchMessageList(e,r.a.MAX_ROW_LENGTH),this.pageNumberHolder=e}getCheckedItemId(e){e.target.checked?this.id_arr.push(e.target.value):this.id_arr.splice(this.id_arr.indexOf(e.target.value),1),this.delete_btn_flag=!(this.id_arr.length>0)}makeString(){for(let e=0;e<this.id_arr.length;e++)this.msgIds=this.msgIds+this.id_arr[e]+",";this.msgIds=this.msgIds.substring(0,this.msgIds.length-1)}deleteMessage(){this.msgIds="",this.makeString(),this.subscription=this._messageService.deleteMessageById(this.msgIds).subscribe(e=>{let t=Object.values(e);this.isLoading=!0,this._toastr.showAlert(t[2],"success"),this.fetchMessageList(this.pageNumberHolder,r.a.MAX_ROW_LENGTH)},e=>{throw e})}searchMessages(e){let t={string:e.target.value,fields:"body"},s=e.target.value;s&&s.length?(this.pagination_flag=!1,this.subscription=this._messageService.searchMessagesAPI(t).subscribe(e=>{this.dataSource=new c.k(e.messages),this.scrollFlag=e.messages.length>r.a.MAX_ROW_LENGTH})):(this.scrollFlag=!1,this.fetchMessageList(this.pageCount,r.a.MAX_ROW_LENGTH))}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(h),l.Pb(d.b),l.Pb(u.a))},e.\u0275cmp=l.Jb({type:e,selectors:[["app-messages"]],viewQuery:function(e,t){if(1&e&&l.Rc(o.a,1),2&e){let e;l.zc(e=l.hc())&&(t.paginator=e.first)}},decls:40,vars:10,consts:[[1,"col-lg-12","right-panel-height"],[1,"white-wrapper"],["style","display: flex;\njustify-content: center;\nalign-items: center;\nposition: absolute;\ntop: 40%;\nleft:45%;",4,"ngIf"],[1,"box-heading"],["src","assets/img/arrow2.png",1,"float-right"],[1,"w-100","mb-3"],[1,"row"],[1,"col-lg-8","plane-ling"],[1,"form-inline","has-search"],["appearance","standard",1,"example-full-width"],[1,"fa","fa-search","form-control-feedback"],["matInput","","placeholder","Search","autocomplete","off",1,"form-control",3,"keyup"],["mat-stroked-button","","type","button","type","button",1,"regular-btn","ml-3",3,"disabled","click"],[1,"col-lg-4"],["mat-fab","","color","primary","aria-label","Example icon button with a delete icon",1,"float-right",3,"routerLink"],[1,"mat-elevation-z8","no-shadow",3,"ngClass"],["mat-table","",1,"user-table",3,"dataSource"],["matColumnDef","checkbox"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","width","20%",3,"click",4,"matCellDef"],["matColumnDef","user"],["class","text-left","mat-header-cell","",4,"matHeaderCellDef"],["class","text-left","mat-cell","","width","15%",4,"matCellDef"],["matColumnDef","subject"],["matColumnDef","preview"],["class","text-left","mat-cell","","width","40%",4,"matCellDef"],["matColumnDef","messagedate"],["class","text-right","mat-header-cell","",4,"matHeaderCellDef"],["class","text-right","mat-cell","","width","15%",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","page-number",3,"lPage","pageNumber","pageNo",4,"ngIf"],["class","d-block text-center",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","position","absolute","top","40%","left","45%"],["color","primary"],["mat-header-cell",""],["mat-cell","","width","20%",3,"click"],[1,"checkbox","path","float-left"],["type","checkbox",3,"value","click"],["viewBox","0 0 21 21"],["d","M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"],[1,"box-heading-profile-name","float-left"],["src","assets/img/no-user-image-icon.jpg",1,"profile-image"],["class","schedule-msg",4,"ngIf"],[1,"schedule-msg"],["mat-header-cell","",1,"text-left"],["mat-cell","","width","15%",1,"text-left"],["mat-cell","","width","40%",1,"text-left"],["mat-header-cell","",1,"text-right"],["mat-cell","","width","15%",1,"text-right"],["mat-header-row",""],["mat-row","",3,"routerLink"],[1,"page-number",3,"lPage","pageNumber","pageNo"],[1,"d-block","text-center"],["src","../../../assets/img/nodata.png"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Lc(2,U,2,0,"div",2),l.Vb(3,"h3",3),l.Nc(4,"Messages"),l.Qb(5,"img",4),l.Ub(),l.Vb(6,"div",5),l.Vb(7,"div",6),l.Vb(8,"div",7),l.Vb(9,"div",8),l.Vb(10,"mat-form-field",9),l.Qb(11,"span",10),l.Vb(12,"input",11),l.gc("keyup",function(e){return t.searchMessages(e)}),l.Ub(),l.Ub(),l.Vb(13,"button",12),l.gc("click",function(){return t.openDialog()}),l.Nc(14," Delete"),l.Ub(),l.Ub(),l.Ub(),l.Vb(15,"div",13),l.Vb(16,"button",14),l.Vb(17,"mat-icon"),l.Nc(18,"add"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Vb(19,"div",15),l.Vb(20,"table",16),l.Tb(21,17),l.Lc(22,V,1,0,"th",18),l.Lc(23,x,8,2,"td",19),l.Sb(),l.Tb(24,20),l.Lc(25,M,2,0,"th",21),l.Lc(26,y,2,1,"td",22),l.Sb(),l.Tb(27,23),l.Lc(28,L,2,0,"th",21),l.Lc(29,I,3,5,"td",22),l.Sb(),l.Tb(30,24),l.Lc(31,N,2,0,"th",21),l.Lc(32,F,3,5,"td",25),l.Sb(),l.Tb(33,26),l.Lc(34,P,2,0,"th",27),l.Lc(35,S,3,3,"td",28),l.Sb(),l.Lc(36,T,1,0,"tr",29),l.Lc(37,A,1,3,"tr",30),l.Ub(),l.Lc(38,j,1,2,"app-paginator-component",31),l.Ub(),l.Lc(39,Q,2,0,"div",32),l.Ub(),l.Ub()),2&e&&(l.Cb(2),l.sc("ngIf",t.isLoading),l.Cb(11),l.sc("disabled",t.delete_btn_flag),l.Cb(3),l.sc("routerLink",l.vc(9,R)),l.Cb(3),l.sc("ngClass",t.scrollFlag?"ex1":""),l.Cb(1),l.sc("dataSource",t.dataSource),l.Cb(16),l.sc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.sc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.sc("ngIf",t.pagination_flag),l.Cb(1),l.sc("ngIf",t.dataNotFound))},directives:[a.m,g.b,p.b,f.a,i.g,v.a,a.k,c.j,c.c,c.e,c.b,c.g,c.i,C.b,c.d,c.a,c.f,c.h,_.a],pipes:[w.a,D.a],styles:["div.ex1[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}div.ex1[_ngcontent-%COMP%]{max-height:490px;min-height:0;overflow-y:scroll}.view-message[_ngcontent-%COMP%]:focus{border:none;outline:none}"]}),e})();var H=s("3Pt+"),Y=s("JX91"),B=s("lJxs"),G=s("EQBp"),W=s("A5z7"),$=s("/1cH"),q=s("FKr1"),X=s("wd/R"),z=s("iadO"),J=s("r3oX");const K=X;let Z=(()=>{class e{constructor(){this.currentDateTime=new Date,this.scheduleData=new l.o;const e=K(new Date).format("YYYY-MM-DD"),t=K(e).add(6,"months"),s=K(t).format("YYYY-MM-DD"),a=(new Date).getFullYear();this.minDate=new Date(a,parseInt(K(e).format("MM"))-1,parseInt(K(e).format("DD"))),this.maxDate=new Date(a,parseInt(K(s).format("MM"))-1,parseInt(K(s).format("DD")))}ngOnInit(){}sendDateTime(){this.pickDate=K(this.pickDate).format("YYYY-MM-DD"),this.currentDateTime=K(this.currentDateTime).format("YYYY-MM-DD HH:mm"),this.scheduleData.emit({userDateTime:this.pickTime,currentDateTime:this.currentDateTime,scheduleFlag:!0}),this.pickTime=void 0}cancelSchedule(){this.scheduleData.emit({scheduleFlag:!1})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Jb({type:e,selectors:[["app-schedule"]],outputs:{scheduleData:"scheduleData"},decls:14,vars:10,consts:[[1,"clearfix"],["appearance","fill",1,"material-div-datepickers"],["matInput","","placeholder","Pick a date",3,"matDatepicker","ngModel","min","max","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"toggle-example"],["readonly","","placeholder","Pick a time",3,"ngxTimepicker","disableClick","ngModel","ngModelChange"],[3,"for"],[3,"minutesGap"],["toggleTimepicker",""],[1,"btn-section"],["type","button","name","","value","Confirm Schedule?",1,"d-block","other-submit",3,"click"],["type","button","name","","value","Cancel",1,"d-block","other-submit",3,"click"]],template:function(e,t){if(1&e&&(l.Qb(0,"div",0),l.Vb(1,"mat-form-field",1),l.Vb(2,"input",2),l.gc("ngModelChange",function(e){return t.pickDate=e}),l.Ub(),l.Qb(3,"mat-datepicker-toggle",3),l.Qb(4,"mat-datepicker",null,4),l.Ub(),l.Vb(6,"div",5),l.Vb(7,"input",6),l.gc("ngModelChange",function(e){return t.pickTime=e}),l.Ub(),l.Qb(8,"ngx-material-timepicker-toggle",7),l.Qb(9,"ngx-material-timepicker",8,9),l.Ub(),l.Vb(11,"div",10),l.Vb(12,"input",11),l.gc("click",function(){return t.sendDateTime()}),l.Ub(),l.Vb(13,"input",12),l.gc("click",function(){return t.cancelSchedule()}),l.Ub(),l.Ub()),2&e){const e=l.Ac(5),s=l.Ac(10);l.Cb(2),l.sc("matDatepicker",e)("ngModel",t.pickDate)("min",t.minDate)("max",t.maxDate),l.Cb(1),l.sc("for",e),l.Cb(4),l.sc("ngxTimepicker",s)("disableClick",!1)("ngModel",t.pickTime),l.Cb(1),l.sc("for",s),l.Cb(1),l.sc("minutesGap",5)}},directives:[g.b,p.b,z.c,H.d,H.s,H.v,z.e,g.e,z.b,J.c,J.d,J.a],styles:[""]}),e})();function ee(e,t){1&e&&(l.Vb(0,"mat-icon",31),l.Nc(1,"cancel"),l.Ub())}function te(e,t){if(1&e){const e=l.Wb();l.Vb(0,"mat-chip",29),l.gc("removed",function(){l.Ec(e);const s=t.$implicit;return l.kc().removeMailNurseFromTo(s)}),l.Nc(1),l.Lc(2,ee,2,0,"mat-icon",30),l.Ub()}if(2&e){const e=t.$implicit,s=l.kc();l.sc("selectable",s.selectable)("removable",s.removable),l.Cb(1),l.Pc(" ",e," "),l.Cb(1),l.sc("ngIf",s.removable)}}function se(e,t){if(1&e&&(l.Vb(0,"span",32),l.Nc(1),l.Ub()),2&e){const e=l.kc();l.Cb(1),l.Oc(e.replyTo)}}function ae(e,t){if(1&e&&(l.Vb(0,"mat-option",37),l.Nc(1),l.Ub()),2&e){const e=t.$implicit;l.sc("value",e),l.Cb(1),l.Pc(" ",e," ")}}function ie(e,t){if(1&e){const e=l.Wb();l.Vb(0,"div",11),l.Vb(1,"mat-form-field",12),l.Qb(2,"input",33),l.Vb(3,"mat-autocomplete",34,35),l.gc("optionSelected",function(t){return l.Ec(e),l.kc().getToLists(t)}),l.Lc(5,ae,2,2,"mat-option",36),l.lc(6,"async"),l.Ub(),l.Ub(),l.Ub()}if(2&e){const e=l.Ac(4),t=l.kc();l.sc("ngClass",t.toControl.hasError("required")&&t.toControl.touched?"red-box":"blue-box"),l.Cb(2),l.sc("formControl",t.toControl)("matAutocomplete",e),l.Cb(3),l.sc("ngForOf",l.mc(6,4,t.filteredOptions))}}function oe(e,t){if(1&e){const e=l.Wb();l.Vb(0,"app-schedule",38),l.gc("scheduleData",function(t){return l.Ec(e),l.kc().getScheduleData(t)}),l.Ub()}}function ce(e,t){if(1&e){const e=l.Wb();l.Vb(0,"input",39),l.gc("click",function(){return l.Ec(e),l.kc().scheduleFlag=!0}),l.Ub()}if(2&e){const e=l.kc();l.sc("disabled",!e.composeMessageForm.valid)}}function ne(e,t){if(1&e){const e=l.Wb();l.Vb(0,"input",40),l.gc("click",function(){return l.Ec(e),l.kc().send()}),l.Ub()}if(2&e){const e=l.kc();l.sc("disabled",!e.composeMessageForm.valid)}}let re=(()=>{class e{constructor(e,t,s,a,i,o){this.formBuilder=e,this._messageService=t,this.router=s,this._toastr=a,this.activatedRoute=i,this._nav=o,this.toControl=new H.h,this.ccControl=new H.h,this.options=[],this.options2=[],this.msg_data="Data",this.scheduleFlag=!1,this.pageTitle="New Message",this.msgIds=void 0,this.hideToFlag=!1,this.name_arr_to=[],this.name_arr_cc=[],this.mode=1,this.selectable=!0,this.removable=!0,this.removeMailNurseFromTo=e=>{this.name_arr_to.splice(this.name_arr_to.indexOf(e),1),this.msgIds="",this.makeString(this.name_arr_to),""===this.msgIds&&this._nav.navigateTo(3===this.mode?"nurse-manager":"messages")},this.removeMailNurseFromCC=e=>{this.name_arr_cc.splice(this.name_arr_cc.indexOf(e),1),this.msgIds="",this.makeString(this.name_arr_cc)},this.getToLists=e=>{2===this.mode&&1===this.name_arr_to.length||this.name_arr_to.includes(e.option.value)||this.name_arr_to.push(e.option.value),this.toControl.setValue(""),this.options.splice(this.options.indexOf(e.option.value),1)},this.getCCLists=e=>{2===this.mode&&1===this.name_arr_cc.length||this.name_arr_cc.includes(e.option.value)||this.name_arr_cc.push(e.option.value),this.ccControl.setValue(""),this.options.splice(this.options.indexOf(e.option.value),1)},this.getNurseId=e=>this.options2.find(t=>0===t.nurse_name.indexOf(e)).nurse_id,this.getNurseNamesFromID=e=>this.options2.find(t=>t.nurse_id===e).nurse_name,this.validation_msgs={toControl:[{type:"invalidAutocompleteObject",message:"Contact name not recognized. Click one of the autocomplete options."},{type:"required",message:"Contact is required."}],phoneLabelAutocompleteControl:[{type:"invalidAutocompleteString",message:"Phone label not recognized. Click one of the autocomplete options."},{type:"required",message:"Phone label is required."}]}}ngOnInit(){this.getNurseNames(),this.routeSub=this.activatedRoute.params.subscribe(e=>{if(this.msgIds=e._id,this.msgIds){this.hideToFlag=!0;let e=this.msgIds.split(",");for(let t=0;t<e.length;t++)setTimeout(()=>{this.name_arr_to.push(this.getNurseNamesFromID(JSON.parse(e[t])))},2e3);this.mode=3}}),this.generateForm();let e=this.activatedRoute.snapshot.data.replydata;e&&(this.replyData=e.messageData,this.pageTitle="Reply",this.mode=2,this.replyTo=this.replyData.to_name,this.hideToFlag=!0,this.composeMessageForm.patchValue({subject:"Re:"+this.replyData.subject,urgent:this.replyData.urgent,todo:this.replyData.todo}));let t=this.activatedRoute.snapshot.data.forwarddata;t&&(this.replyData=t.messageData,this.pageTitle="Forward",this.mode=1,this.composeMessageForm.patchValue({subject:this.replyData.subject,body:this.replyData.body,urgent:this.replyData.urgent,todo:this.replyData.todo})),this.filteredOptions=this.toControl.valueChanges.pipe(Object(Y.a)(""),Object(B.a)(e=>this._filter(e))),this.filteredOptions2=this.ccControl.valueChanges.pipe(Object(Y.a)(""),Object(B.a)(e=>this._filter(e)))}_filter(e){const t=e.toLowerCase();return this.options.filter(e=>0===e.toLowerCase().indexOf(t))}generateForm(){this.composeMessageForm=this.formBuilder.group({subject:["",H.A.required],body:["",H.A.required],urgent:[0],todo:[0],to_id:[],cc_nurse_id:[],sent:[0],schedule:[],current_time:[]})}makeString(e){for(let t=0;t<e.length;t++)this.msgIds=this.msgIds+this.getNurseId(e[t])+",";this.msgIds=this.msgIds.substring(0,this.msgIds.length-1)}getNurseNames(){this.subscription=this._messageService.getNurseList().subscribe(e=>{e.status&&e.nursedropdown.forEach(e=>{this.options.push(e.nurse_name),this.options2.push(e)})},e=>{throw e})}send(){this.composeMessageForm.value.sent=1,this.composeMessageForm.value.todo&&(this.composeMessageForm.value.todo=1),this.composeMessageForm.value.urgent&&(this.composeMessageForm.value.urgent=1),delete this.composeMessageForm.value.schedule,delete this.composeMessageForm.value.current_time,(null!==this.toControl.value||this.toControl.value)&&(this.msgIds="",this.makeString(this.name_arr_to),this.composeMessageForm.value.to_id=this.msgIds),(null!==this.ccControl.value||this.ccControl.value)&&(this.msgIds="",this.makeString(this.name_arr_cc),this.composeMessageForm.value.cc_nurse_id=this.msgIds),2===this.mode&&(this.composeMessageForm.value.to_id=this.getNurseId(this.replyTo)),this.subscription=this._messageService.sendMessage(this.composeMessageForm.value).subscribe(e=>{let t=Object.values(e);this._toastr.showAlert(t[0],"success"),this.router.navigateByUrl("messages")},e=>{throw e})}getScheduleData(e){this.scheduleFlag=e.scheduleFlag,this.composeMessageForm.value.schedule=e.userDateTime,this.composeMessageForm.value.current_time=e.currentDateTime,!1!==this.scheduleFlag&&(this.composeMessageForm.value.sent=0,this.composeMessageForm.value.todo&&(this.composeMessageForm.value.todo=1),this.composeMessageForm.value.urgent&&(this.composeMessageForm.value.urgent=1),(null!==this.toControl.value||this.toControl.value)&&(this.msgIds="",this.makeString(this.name_arr_to),this.composeMessageForm.value.to_id=this.msgIds),(null!==this.ccControl.value||this.ccControl.value)&&(this.msgIds="",this.makeString(this.name_arr_cc),this.composeMessageForm.value.cc_nurse_id=this.msgIds),this.subscription=this._messageService.sendMessage(this.composeMessageForm.value).subscribe(e=>{let t=Object.values(e);this._toastr.showAlert(t[0],"success"),this.router.navigateByUrl("messages"),this.router.navigateByUrl("messages")},e=>{throw e}))}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(H.g),l.Pb(h),l.Pb(i.f),l.Pb(u.a),l.Pb(i.a),l.Pb(G.a))},e.\u0275cmp=l.Jb({type:e,selectors:[["app-new-message"]],decls:42,vars:12,consts:[[1,"col-lg-12","right-panel-height"],[1,"white-wrapper"],[1,"box-heading"],["src","assets/img/arrow2.png",1,"float-right"],["autocomplete","off",3,"formGroup"],[1,"row"],[1,"col-lg-12"],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[1,"col-lg-6"],["style","padding:6px 10px;background: #ccc; border-color:#666 ;","class","blue-box",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["appearance","standard"],["type","text","matInput","","formControlName","subject","placeholder","Subject:",1,"border-0","invisible-fild",3,"maxlength"],[1,"col-lg-8"],["name","","formControlName","body",1,"big-t-area",3,"maxlength"],[1,"col-lg-4","mt-3","other-chbox","other-chbox-custom"],[1,"checkbox","path","float-left"],["type","checkbox","formControlName","urgent"],["viewBox","0 0 21 21"],["d","M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"],[1,"lb-txt"],[1,"clearfix"],["type","checkbox","formControlName","todo"],[1,"schedule-wrapper"],[3,"scheduleData",4,"ngIf"],[1,"btn-section"],["type","button","name","","value","Schedule","class","d-block other-submit",3,"disabled","click",4,"ngIf"],["type","submit","name","","value","Send","class","d-block other-submit",3,"disabled","click",4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"blue-box",2,"padding","6px 10px","background","#ccc","border-color","#666"],["type","text","placeholder","To:","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"scheduleData"],["type","button","name","","value","Schedule",1,"d-block","other-submit",3,"disabled","click"],["type","submit","name","","value","Send",1,"d-block","other-submit",3,"disabled","click"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Vb(2,"h3",2),l.Nc(3),l.Qb(4,"img",3),l.Ub(),l.Vb(5,"form",4),l.Vb(6,"div",5),l.Vb(7,"div",6),l.Vb(8,"mat-chip-list"),l.Lc(9,te,3,4,"mat-chip",7),l.Ub(),l.Ub(),l.Vb(10,"div",8),l.Lc(11,se,2,1,"span",9),l.Lc(12,ie,7,6,"div",10),l.Vb(13,"div",11),l.Vb(14,"mat-form-field",12),l.Qb(15,"input",13),l.Ub(),l.Ub(),l.Ub(),l.Qb(16,"div",8),l.Ub(),l.Vb(17,"div",5),l.Vb(18,"div",6),l.Vb(19,"div",11),l.Vb(20,"div",5),l.Vb(21,"div",14),l.Qb(22,"textarea",15),l.Ub(),l.Vb(23,"div",16),l.Vb(24,"label",17),l.Qb(25,"input",18),l.jc(),l.Vb(26,"svg",19),l.Qb(27,"path",20),l.Ub(),l.Ub(),l.ic(),l.Vb(28,"label",21),l.Nc(29,"Urgent"),l.Ub(),l.Qb(30,"div",22),l.Vb(31,"label",17),l.Qb(32,"input",23),l.jc(),l.Vb(33,"svg",19),l.Qb(34,"path",20),l.Ub(),l.Ub(),l.ic(),l.Vb(35,"label",21),l.Nc(36,"To-Do"),l.Ub(),l.Vb(37,"div",24),l.Lc(38,oe,1,0,"app-schedule",25),l.Ub(),l.Vb(39,"div",26),l.Lc(40,ce,1,1,"input",27),l.Lc(41,ne,1,1,"input",28),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(3),l.Oc(t.pageTitle),l.Cb(2),l.sc("formGroup",t.composeMessageForm),l.Cb(4),l.sc("ngForOf",t.name_arr_to),l.Cb(2),l.sc("ngIf",t.replyTo),l.Cb(1),l.sc("ngIf",!t.hideToFlag),l.Cb(1),l.sc("ngClass",t.composeMessageForm.controls.subject.touched&&t.composeMessageForm.controls.subject.hasError("required")?"red-box":t.composeMessageForm.controls.subject.hasError("maxlength")?"yellow-box":"blue-box"),l.Cb(2),l.sc("maxlength",50),l.Cb(4),l.sc("ngClass",t.composeMessageForm.controls.body.touched&&t.composeMessageForm.controls.body.hasError("required")?"red-box col-lg-12":t.composeMessageForm.controls.body.hasError("maxlength")?"yellow-box col-lg-12":"blue-box col-lg-12"),l.Cb(3),l.sc("maxlength",500),l.Cb(16),l.sc("ngIf",t.scheduleFlag),l.Cb(2),l.sc("ngIf",!t.scheduleFlag),l.Cb(1),l.sc("ngIf",!t.scheduleFlag))},directives:[H.B,H.t,H.l,W.b,a.l,a.m,a.k,g.b,p.b,H.d,H.s,H.j,H.o,H.a,W.a,v.a,W.c,$.c,H.i,$.a,q.m,Z],pipes:[a.b],styles:[".mat-chip.mat-standard-chip[_ngcontent-%COMP%]{background-color:#f3f7ff!important;color:#6b8ff4!important;font-size:12px}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#508ff4;position:relative;top:4px;opacity:1}"]}),e})();function le(e,t){1&e&&l.Qb(0,"th",42)}function be(e,t){1&e&&l.Qb(0,"td",43)}function me(e,t){1&e&&(l.Vb(0,"th",44),l.Nc(1," User"),l.Ub())}function he(e,t){1&e&&(l.Vb(0,"th",44),l.Nc(1," Subject "),l.Ub())}function de(e,t){1&e&&(l.Vb(0,"th",45),l.Nc(1," Preview "),l.Ub())}function ue(e,t){1&e&&(l.Vb(0,"th",46),l.Nc(1,"Date "),l.Ub())}function ge(e,t){1&e&&l.Qb(0,"tr",47)}function pe(e,t){1&e&&(l.Vb(0,"td",48),l.Vb(1,"label",35),l.Qb(2,"input",49),l.jc(),l.Vb(3,"svg",37),l.Qb(4,"path",38),l.Ub(),l.Ub(),l.ic(),l.Vb(5,"div",50),l.Qb(6,"img",51),l.Ub(),l.Ub()),2&e&&(l.Cb(2),l.sc("disabled",!0))}function fe(e,t){if(1&e&&(l.Vb(0,"td",52),l.Nc(1),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",e.to_name," ")}}function ve(e,t){if(1&e&&(l.Vb(0,"td",52),l.Nc(1),l.lc(2,"textLimit"),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",l.oc(2,1,e.subject,0,10)," ")}}function Ce(e,t){if(1&e&&(l.Vb(0,"td",53),l.Nc(1),l.lc(2,"textLimit"),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",l.oc(2,1,e.body,0,10)," ")}}function _e(e,t){if(1&e&&(l.Vb(0,"td",54),l.Nc(1),l.lc(2,"dateFormat"),l.Ub()),2&e){const e=t.$implicit;l.Cb(1),l.Pc(" ",l.mc(2,1,e.created_at)," ")}}function we(e,t){1&e&&l.Qb(0,"tr",55)}function De(e,t){if(1&e&&(l.Vb(0,"div"),l.Qb(1,"div",40),l.Vb(2,"h3",56),l.Nc(3,"Scheduled at:"),l.Ub(),l.Vb(4,"p",33),l.Nc(5),l.lc(6,"dateFormat"),l.Ub(),l.Vb(7,"p",34),l.Nc(8),l.lc(9,"date"),l.Ub(),l.Ub()),2&e){const e=l.kc();l.Cb(5),l.Pc("Date:",l.mc(6,2,e.msgData.schedule),""),l.Cb(3),l.Pc("Time:",l.nc(9,4,e.msgData.schedule,"shortTime"),"")}}const Ue=function(){return["/messages/new-message"]};let Ve=(()=>{class e{constructor(e,t,s,a,i,o){this.activatedRoute=e,this._messageService=t,this.dialog=s,this._toastr=a,this.router=i,this._nav=o,this.displayedColumns=["checkbox","user","subject","preview","messagedate"],this.dataSource=new c.k,this.archiveMessage=()=>{this.subscription=this._messageService.messageArchiveAPI(this.msgData.id).subscribe(e=>{this._toastr.showAlert(e.message,"success"),this._nav.navigateTo("messages")})},this.replyMessage=()=>{this._nav.navigateTo("messages/reply-message/"+this.msgData.id)},this.forwardMessage=()=>{this._nav.navigateTo("messages/forward-message/"+this.msgData.id)}}ngOnInit(){let e=[];e.push(this.activatedRoute.snapshot.data.data.messageData),this.msgData=e[0],this.dataSource=new c.k(e),setTimeout(()=>{this.msgData.urgent=1===this.msgData.urgent,this.msgData.todo=1===this.msgData.todo},100)}openDialog(){this.dialog.open(n.a,{data:{msg:"Are you sure you want to delete?"}}).afterClosed().subscribe(e=>{"1"==e&&this.deleteMsg()})}deleteMsg(){this.subscription=this._messageService.deleteMessageById(this.msgData.id).subscribe(e=>{this._toastr.showAlert(e.message,"success"),this._nav.navigateTo("messages")})}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(i.a),l.Pb(h),l.Pb(d.b),l.Pb(u.a),l.Pb(i.f),l.Pb(G.a))},e.\u0275cmp=l.Jb({type:e,selectors:[["app-read-message"]],decls:75,vars:20,consts:[[1,"col-lg-12"],[1,"white-wrapper"],[1,"box-heading"],["src","assets/img/arrow2.png",1,"float-right"],[1,"w-100","mb-3"],[1,"row"],[1,"col-lg-8","plane-ling"],[1,"form-inline","has-search"],["mat-stroked-button","","type","button","type","button",1,"regular-btn","ml-3",3,"click"],[1,"col-lg-4"],["mat-fab","","color","primary","aria-label","Example icon button with a delete icon",1,"float-right",3,"routerLink"],[1,"mat-elevation-z8","no-shadow"],["mat-table","",1,"user-table",3,"dataSource"],["matColumnDef","checkbox"],["mat-header-cell","","width","15%",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["class","text-left","mat-header-cell","","width","15%",4,"matHeaderCellDef"],["matColumnDef","subject"],["matColumnDef","preview"],["class","text-left","mat-header-cell","","width","40%",4,"matHeaderCellDef"],["matColumnDef","messagedate"],["class","text-right","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],[1,"blue-border"],["mat-cell","","width","15%",4,"matCellDef"],["class","text-left","mat-cell","","width","15%",4,"matCellDef"],["class","text-left","mat-cell","","width","40%",4,"matCellDef"],["class","text-right","mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"col-lg-8"],["name","",1,"big-t-area","custom-big-t","mb-3","mt-23",3,"disabled"],[1,"col-lg-4","mt-3","other-chbox","other-chbox-custom"],[1,"mb-0","date-time"],[1,"date-time"],[1,"checkbox","path","float-left"],["type","checkbox",3,"checked","disabled"],["viewBox","0 0 21 21"],["d","M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"],[1,"lb-txt"],[1,"clearfix"],[4,"ngIf"],["mat-header-cell","","width","15%"],["mat-cell",""],["mat-header-cell","","width","15%",1,"text-left"],["mat-header-cell","","width","40%",1,"text-left"],["mat-header-cell","",1,"text-right"],["mat-header-row",""],["mat-cell","","width","15%"],["type","checkbox","checked","checked",3,"disabled"],[1,"box-heading-profile-name","float-left"],["src","assets/img/no-user-image-icon.jpg",1,"profile-image"],["mat-cell","","width","15%",1,"text-left"],["mat-cell","","width","40%",1,"text-left"],["mat-cell","",1,"text-right"],["mat-row",""],[1,"mb-0","mt-3","color-blue"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Vb(2,"h3",2),l.Nc(3,"Messages"),l.Qb(4,"img",3),l.Ub(),l.Vb(5,"div",4),l.Vb(6,"div",5),l.Vb(7,"div",6),l.Vb(8,"div",7),l.Vb(9,"button",8),l.gc("click",function(){return t.openDialog()}),l.Nc(10," Delete"),l.Ub(),l.Vb(11,"button",8),l.gc("click",function(){return t.replyMessage()}),l.Nc(12," Reply"),l.Ub(),l.Vb(13,"button",8),l.gc("click",function(){return t.forwardMessage()}),l.Nc(14," Forward"),l.Ub(),l.Vb(15,"button",8),l.gc("click",function(){return t.archiveMessage()}),l.Nc(16," Archive"),l.Ub(),l.Ub(),l.Ub(),l.Vb(17,"div",9),l.Vb(18,"button",10),l.Vb(19,"mat-icon"),l.Nc(20,"add"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Vb(21,"div",11),l.Vb(22,"table",12),l.Tb(23,13),l.Lc(24,le,1,0,"th",14),l.Lc(25,be,1,0,"td",15),l.Sb(),l.Tb(26,16),l.Lc(27,me,2,0,"th",17),l.Sb(),l.Tb(28,18),l.Lc(29,he,2,0,"th",17),l.Sb(),l.Tb(30,19),l.Lc(31,de,2,0,"th",20),l.Sb(),l.Tb(32,21),l.Lc(33,ue,2,0,"th",22),l.Sb(),l.Lc(34,ge,1,0,"tr",23),l.Ub(),l.Vb(35,"div",5),l.Vb(36,"div",0),l.Vb(37,"div",24),l.Vb(38,"table",12),l.Tb(39,13),l.Lc(40,pe,7,1,"td",25),l.Sb(),l.Tb(41,16),l.Lc(42,fe,2,1,"td",26),l.Sb(),l.Tb(43,18),l.Lc(44,ve,3,5,"td",26),l.Sb(),l.Tb(45,19),l.Lc(46,Ce,3,5,"td",27),l.Sb(),l.Tb(47,21),l.Lc(48,_e,3,3,"td",28),l.Sb(),l.Lc(49,we,1,0,"tr",29),l.Ub(),l.Vb(50,"div",5),l.Vb(51,"div",30),l.Vb(52,"textarea",31),l.Nc(53),l.Ub(),l.Ub(),l.Vb(54,"div",32),l.Vb(55,"p",33),l.Nc(56),l.lc(57,"dateFormat"),l.Ub(),l.Vb(58,"p",34),l.Nc(59),l.lc(60,"date"),l.Ub(),l.Vb(61,"label",35),l.Qb(62,"input",36),l.jc(),l.Vb(63,"svg",37),l.Qb(64,"path",38),l.Ub(),l.Ub(),l.ic(),l.Vb(65,"label",39),l.Nc(66,"Urgent"),l.Ub(),l.Qb(67,"div",40),l.Vb(68,"label",35),l.Qb(69,"input",36),l.jc(),l.Vb(70,"svg",37),l.Qb(71,"path",38),l.Ub(),l.Ub(),l.ic(),l.Vb(72,"label",39),l.Nc(73,"To-Do"),l.Ub(),l.Lc(74,De,10,7,"div",41),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(18),l.sc("routerLink",l.vc(19,Ue)),l.Cb(4),l.sc("dataSource",t.dataSource),l.Cb(12),l.sc("matHeaderRowDef",t.displayedColumns),l.Cb(4),l.sc("dataSource",t.dataSource),l.Cb(11),l.sc("matRowDefColumns",t.displayedColumns),l.Cb(3),l.sc("disabled",!0),l.Cb(1),l.Oc(t.msgData.body),l.Cb(3),l.Pc("Date:",l.mc(57,14,t.msgData.created_at),""),l.Cb(3),l.Pc("Time:",l.nc(60,16,t.msgData.created_at,"shortTime"),""),l.Cb(3),l.sc("checked",t.msgData.urgent)("disabled",!0),l.Cb(7),l.sc("checked",t.msgData.todo)("disabled",!0),l.Cb(5),l.sc("ngIf",null!==t.msgData.schedule))},directives:[f.a,i.g,v.a,c.j,c.c,c.e,c.b,c.g,c.i,a.m,c.d,c.a,c.f,c.h],pipes:[D.a,a.e,w.a],styles:["table[_ngcontent-%COMP%]{width:100%}.custom-big-t[_ngcontent-%COMP%]{width:95%;float:right;height:355px}.date-time[_ngcontent-%COMP%]{font-family:Lato,sans-serif!important;font-size:11px!important}"]}),e})(),ke=(()=>{class e{constructor(e){this.http=e}resolve(e){return this.id=e.paramMap.get("id"),this.http.post(r.a.baseUrl+"message-view/"+this.id,this.id)}}return e.\u0275fac=function(t){return new(t||e)(l.cc(b.b))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac}),e})();const xe=[{path:"",component:E},{path:"new-message",component:re},{path:"read-message/:id",component:Ve,resolve:{data:ke}},{path:"reply-message/:id",component:re,resolve:{replydata:ke}},{path:"forward-message/:id",component:re,resolve:{forwarddata:ke}},{path:"message-nurses/:_id",component:re}];let Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({providers:[ke],imports:[[i.j.forChild(xe)],i.j]}),e})();var ye=s("FpXt");let Le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({imports:[[a.c,Me,ye.a]]}),e})()}}]);